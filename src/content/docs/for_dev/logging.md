---
title: 'ログ出力機能仕様書'
description: 'EAUploaderのログ出力機能仕様書'
---
# 開発に興味がありますか？
Project EAUploaderでは開発メンバーを常に募集しています！！
話を聞くだけでもOK！
是非当プロジェクトのDiscordサーバーへお越しください。
[参加はこちら](https://discord.gg/yYFru7brra)
* * *
* * *
# 概要
* * *
本ログ出力機能は、EAUplaoderの一連の内部動作をログファイルに出力し、開発者が容易に閲覧できる機能を提供する。本機能は、開発者がより迅速に不具合解析を行う目的で提供する。

# 用語
* * *
1. ログファイルGUID：ログファイルごとにEAUplaoderによって割り当てられるGUIDを指す。開発者が送信されたログファイルを特定するために使用する。
2. EAUログ：ログ種別EAUであるようなログを指す。
3. EAUログ出力メソッド：EAUログを出力する際に用いるメソッドを指す。

本機能は、次の機能を提供する。

# ログ出力機能
* * *
## ログ出力機能の開始契機と終了契機

EAUploader起動中、常時ログを出力する。

## ログの出力範囲

Unity上のConsoleに出力されているログをすべてログファイルに出力する。また、EAUログ出力メソッドがコールされた場合にも、ログを出力する。

## ログファイル形式及びログファイルの保存場所

本機能で出力されるログファイルは、Unityプロジェクトフォルダ直下の`EAUploaderLog`フォルダにすべて保存する。

`EAUploaderLog`フォルダに保持するログファイルの容量は、100MBまでとする。ログファイルの容量が100MBを超えた状態で、ログファイルを追記しようとした場合、容量が100MBを下回るまで、最も古いログファイルから削除する。

ログファイルの出力単位は、EAUploader起動時から、EAUploader終了時である。ログファイルの命名形式は`YYYY-MM-DD-1.log`とする。YYYY-MM-DDは、ログファイルが生成された年月日（UTC）、-[number]は、同日中にEAUploaderが起動された回数を表す。2024-04-22-3.logというログファイルは、2024年4月22日のEAUplaoder3回目起動時に出力されたログファイルであることを示す。

## EAUploader起動時に出力するログ

EAUplaoder起動時には、環境情報と日付（UTC）、ログファイルGUIDを出力する。

## ログの出力形式

ログは次の形式で出力する。

> 02:42:42.345 [LOG_TYPE] [LOG_MESSAGE] [LOG_TRACELOG]

1. タイムスタンプ
   1. hh:mm:ss.fff形式でログが出力された時刻（UTC）を出力する。
2. LOG_TYPE
   1. ログ種別を表す。種別は次の通り。
      1. LOG:通常ログ。一般的なログレベル。
      2. WNG:警告ログ。
      3. ERR:エラーログ。
      4. EXP:Exceptionログ。
      5. AST:Assertログ。
      6. EAU:EAUログ。
3. LOG_MESSAGE
   1. ログメッセージ本文。
4. LOG_TRACELOG
   1. ログ出力場所。ERR,EXPの場合、トレースログを表示する。

## EAUログ出力メソッド

EAUログ出力メソッドをコールした場合、EAUログを出力する。EAUログは、EAUploaderの操作をログファイルに記録したい場合に使用する。

# ログレポート送信機能
* * *
## 送信機能起動契機

~ユーザーはトップ画面に表示した「ログレポートを表示する」ボタンから、開発者に対し、ログファイルを送信することができる。~
**現在送信はできません。**

## 送信機能画面遷移

「ログレポートを表示する」ボタン押下後、ユーザーに対しログファイルを本当に送信するかどうか確認するダイアログを表示する。

ユーザーが前述のダイアログにおいて、送信する旨のボタンを押下した場合、ログファイル送信処理を実行する。×ボタンを押して、ダイアログを閉じた場合は、ログファイル送信処理を実行せず、トップ画面へ遷移する。

ログファイル送信処理が成功した場合、ユーザーに送信完了メッセージと、ログファイルGUIDを表示する。
ログファイル送信処理が失敗した場合、ユーザーに送信が失敗した旨のメッセージを送信する。
