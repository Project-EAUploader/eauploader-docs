---
title: '日志输出功能规范'
description: 'EAUploader的日志输出功能规范'
---

# 概述

本日志输出功能将EAUploader的一系列内部操作输出到日志文件中，为开发人员提供方便查看的功能。该功能旨在帮助开发人员更快速地进行故障分析。

# 术语

1. 日志文件GUID：由EAUploader分配给每个日志文件的GUID，用于开发人员识别发送的日志文件。
2. EAU日志：指EAU类型的日志。
3. EAU日志输出方法：用于输出EAU日志的方法。

该功能提供以下功能。

# 日志输出功能

## 日志输出功能的启动和结束时机

在EAUploader启动期间，始终输出日志。

## 日志输出范围

将Unity控制台中输出的所有日志都输出到日志文件中。同时，当调用EAU日志输出方法时，也会输出日志。

## 日志文件格式和保存位置

由该功能输出的日志文件将全部保存在Unity项目文件夹下的`EAUploaderLog`文件夹中。

`EAUploaderLog`文件夹中保存的日志文件容量限制为100MB。当日志文件容量超过100MB并尝试追加日志时，将从最旧的日志文件开始删除，直到容量低于100MB为止。

日志文件的输出单位是从EAUploader启动到EAUploader结束。日志文件的命名格式为`YYYY-MM-DD-1.log`。其中，YYYY-MM-DD表示生成日志文件的年月日（UTC），-[number]表示在同一天内启动EAUploader的次数。例如，名为2024-04-22-3.log的日志文件表示在2024年4月22日第3次启动EAUploader时生成的日志文件。

## EAUploader启动时输出的日志

在EAUploader启动时，输出环境信息、日期（UTC）和日志文件GUID。

## 日志输出格式

日志的输出格式如下所示。

> 02:42:42.345 [LOG_TYPE] [LOG_MESSAGE] [LOG_TRACELOG]

1. 时间戳
  以hh:mm:ss.fff的格式输出日志的时间（UTC）。
2. LOG_TYPE
  表示日志类型。类型如下：
    1. LOG：普通日志，一般的日志级别。
    2. WNG：警告日志。
    3. ERR：错误日志。
    4. EXP：异常日志。
    5. AST：断言日志。
    6. EAU：EAU日志。
3. LOG_MESSAGE
  日志消息正文。
4. LOG_TRACELOG
  日志输出位置。对于ERR和EXP，显示跟踪日志。

## EAU日志输出方法

当调用EAU日志输出方法时，将输出EAU日志。EAU日志用于记录EAUploader的操作到日志文件中。

# 日志报告发送功能

## 发送功能的启动时机

用户可以通过主界面上的“显示日志报告”按钮向开发人员发送日志文件。该功能将发送日志文件夹中最新的日志文件。

## 发送功能界面转换

在按下“显示日志报告”按钮后，将显示一个对话框，询问用户是否真要发送日志文件。

如果用户在上述对话框中按下发送按钮，将执行日志文件发送处理。如果按下×按钮关闭对话框，则不执行日志文件发送处理，并返回主界面。

如果日志文件发送处理成功，将向用户显示发送完成消息和日志文件GUID。如果日志文件发送处理失败，将向用户发送发送失败消息。

以上内容。

